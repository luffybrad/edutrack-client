<!-- src/app/shared/entities/subject/subject-assign/subject-assign.component.html -->
<app-loading-overlay [show]="loading"></app-loading-overlay>

<h2 class="text-xl font-bold mb-4" *ngIf="subject">
  Assign Students to {{ subject.name | uppercase }}
</h2>

<div class="space-y-4 max-h-[500px] overflow-y-auto border p-4 rounded">

  <div *ngFor="let cls of classes" class="border rounded p-3">
    <!-- Class checkbox -->
    <label class="font-semibold flex items-center gap-2">
      <input type="checkbox" [checked]="isClassFullyAssigned(cls)" (change)="toggleClass(cls, $event)" />
      FORM {{ cls.form }} - {{ cls.stream }} ({{ cls.year }})
    </label>

    <!-- Students in class -->
    <div class="ml-6 mt-2 space-y-1">
      <label *ngFor="let student of getStudentsForClass(cls.id!)" class="flex items-center gap-2 text-sm">
        <input type="checkbox" [checked]="isAssigned(student)" (change)="toggleStudent(student, $event)" />
        {{ student.name }}
      </label>
    </div>
  </div>

</div>

<p class="mt-2 text-gray-600 font-medium">
  Total Students Assigned: {{ getTotalAssigned() }}
</p>

<button class="mt-6 bg-blue-600 text-white px-4 py-2 rounded" (click)="save()">
  Save Changes
</button>