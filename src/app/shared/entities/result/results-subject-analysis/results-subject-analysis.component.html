<div class="p-6 space-y-6">

    <!-- Header -->
    <div class="flex items-center gap-2 text-2xl font-bold">
        <i class="fa-solid fa-book-open text-indigo-600"></i>
        Subject Analysis
    </div>

    <!-- Subject Selector -->
    <div class="flex flex-wrap gap-2">
        <button *ngFor="let s of subjects" (click)="loadSubject(s)"
            class="px-4 py-2 rounded-lg border text-sm font-medium transition"
            [class.bg-indigo-600]="selectedSubject === s" [class.text-white]="selectedSubject === s"
            [class.bg-gray-100]="selectedSubject !== s">
            {{ s | titlecase }}
        </button>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="flex items-center gap-2 text-blue-600">
        <i class="fa-solid fa-spinner fa-spin"></i>
        Loading subject analysis...
    </div>

    <!-- Analysis -->
    <div *ngIf="analysis && !loading" class="space-y-6">

        <!-- Stats -->
        <section class="bg-white rounded-xl shadow p-6">
            <h2 class="text-lg font-semibold mb-4 flex items-center gap-2">
                <i class="fa-solid fa-chart-bar text-indigo-600"></i>
                {{ analysis.subject | titlecase }} Performance
            </h2>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-green-50 p-4 rounded">
                    <p class="text-gray-500">Highest</p>
                    <p class="text-xl font-bold text-green-700">{{ analysis.highest }}</p>
                </div>

                <div class="bg-red-50 p-4 rounded">
                    <p class="text-gray-500">Lowest</p>
                    <p class="text-xl font-bold text-red-700">{{ analysis.lowest }}</p>
                </div>

                <div class="bg-blue-50 p-4 rounded">
                    <p class="text-gray-500">Mean</p>
                    <p class="text-xl font-bold text-blue-700">{{ analysis.mean }}</p>
                </div>

                <div class="bg-gray-50 p-4 rounded">
                    <p class="text-gray-500">Count</p>
                    <p class="text-xl font-bold">{{ analysis.count }}</p>
                </div>
            </div>
        </section>

        <!-- Grade Distribution -->
        <section class="bg-white rounded-xl shadow p-6">
            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                <i class="fa-solid fa-layer-group text-purple-600"></i>
                Grade Distribution
            </h3>

            <ul class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <li *ngFor="let g of analysis.gradeDistribution | keyvalue"
                    class="flex justify-between bg-gray-100 px-4 py-3 rounded">
                    <span class="font-semibold">{{ g.key }}</span>
                    <span>{{ g.value }}</span>
                </li>
            </ul>
        </section>

    </div>

    <!-- Empty -->
    <div *ngIf="!analysis && !loading && selectedSubject" class="text-gray-500">
        No data available for this subject.
    </div>

</div>