<div class="bg-white p-6 rounded-lg shadow-md border border-blue-200 mt-4">
    <h2 class="text-2xl font-semibold text-blue-600 mb-4 flex items-center gap-2">
        <i class="fas fa-chart-bar"></i> Exam Analytics
    </h2>

    <!-- Exam selector -->
    <div class="flex flex-col md:flex-row gap-3 mb-4">
        <select [(ngModel)]="selectedExamId" (change)="onExamChange()"
            class="border rounded-lg p-2 flex-1 focus:outline-none focus:ring-2 focus:ring-blue-400">
            <option value="" disabled selected>Select Exam</option>
            <option *ngFor="let exam of exams" [value]="exam.id">{{ exam.name }}</option>
        </select>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="text-blue-600 mb-2">Loading analytics...</div>

    <!-- No data -->
    <div *ngIf="!loading && (!analytics || !analytics.topPerformers.length)" class="text-gray-500">
        No analytics available for the selected exam.
    </div>

    <!-- Charts -->
    <div *ngIf="analytics" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div *ngIf="topPerformersChart.datasets.length">
            <h3 class="font-semibold text-blue-700 mb-2">Top Performers</h3>
            <canvas baseChart [data]="topPerformersChart" [options]="chartOptions" [type]="'bar'"></canvas>
        </div>

        <div *ngIf="weakSubjectsChart.datasets.length">
            <h3 class="font-semibold text-blue-700 mb-2">Weak Subjects</h3>
            <canvas baseChart [data]="weakSubjectsChart" [options]="chartOptions" [type]="'bar'"></canvas>
        </div>
    </div>
</div>